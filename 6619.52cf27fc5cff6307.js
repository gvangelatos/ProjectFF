"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6619],{6619:(D,m,a)=>{a.r(m),a.d(m,{EditOutfitPage:()=>U});var f=a(6895),c=a(433),o=a(7002),p=a(1448),v=a(8004),h=a(3900),O=a(8505),t=a(8256),E=a(9804),C=a(2575),T=a(6635);const I=["modal"];function Z(l,r){if(1&l&&(t.TgZ(0,"ion-select-option",17),t._uU(1),t.qZA()),2&l){const i=r.$implicit;t.Q6J("value",i),t.xp6(1),t.Oqu(i)}}function P(l,r){if(1&l&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2,"Type:"),t.qZA(),t._uU(3),t.BQk()),2&l){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.type,", ")}}function b(l,r){if(1&l&&(t.ynx(0),t.TgZ(1,"b"),t._uU(2,"Color:"),t.qZA(),t._uU(3),t.BQk()),2&l){const i=t.oxw().$implicit;t.xp6(3),t.hij(" ",i.color,"")}}function A(l,r){if(1&l){const i=t.EpF();t.TgZ(0,"ion-item")(1,"ion-thumbnail",1),t._UZ(2,"img",23),t.qZA(),t.TgZ(3,"ion-checkbox",24),t.NdJ("ionChange",function(n){t.CHM(i);const s=t.oxw(2);return t.KtG(s.checkboxChange(n))}),t.TgZ(4,"ion-label")(5,"h5"),t._uU(6),t.qZA(),t.TgZ(7,"p"),t.YNc(8,P,4,1,"ng-container",25),t.YNc(9,b,4,1,"ng-container",25),t.qZA()()()()}if(2&l){const i=r.$implicit,e=t.oxw(2);t.xp6(2),t.Q6J("src",i.imageUrl,t.LSH),t.xp6(1),t.Q6J("value",i)("checked",e.isChecked(i.id)),t.xp6(3),t.AsE("",i.setting," ",i.subType,""),t.xp6(2),t.Q6J("ngIf",i.color),t.xp6(1),t.Q6J("ngIf",i.color)}}function x(l,r){if(1&l){const i=t.EpF();t.TgZ(0,"ion-header")(1,"ion-toolbar")(2,"ion-buttons",1)(3,"ion-button",18),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.cancelChanges())}),t._uU(4,"Cancel"),t.qZA()(),t.TgZ(5,"ion-title"),t._uU(6,"Choose Items"),t.qZA(),t.TgZ(7,"ion-buttons",19)(8,"ion-button",18),t.NdJ("click",function(){t.CHM(i);const n=t.oxw();return t.KtG(n.confirmChanges())}),t._uU(9,"Done"),t.qZA()()()(),t.TgZ(10,"ion-content",20)(11,"ion-list",21),t.YNc(12,A,10,7,"ion-item",22),t.qZA()()}if(2&l){const i=t.oxw();t.xp6(11),t.Q6J("inset",!0),t.xp6(1),t.Q6J("ngForOf",i.clothingItems)("ngForTrackBy",i.trackItems)}}let U=(()=>{class l{constructor(i,e,n,s,u,_){this.wardrobeService=i,this.loadingCtrl=e,this.outfitsService=n,this.toastCtrl=s,this.navCtrl=u,this.activatedRoute=_,this.clothingSettings=p.Zr,this.clothingItems=[],this.selectedItems=[]}ngOnInit(){this.form=new c.cw({outfitSetting:new c.NI(null,{updateOn:"change",validators:[c.kI.required]}),outfitName:new c.NI(null,{updateOn:"change",validators:[c.kI.required]})}),this.loadingCtrl.create({message:"Fetching Outfit data..."}).then(i=>{var e,n;i.present(),null===(e=this.activatedRoute)||void 0===e||null===(n=e.paramMap)||void 0===n||n.pipe((0,h.w)(s=>(null!=s&&s.has("outfitId")||this.navCtrl.navigateBack("/home/tabs/feed"),this.outfitsService.getOutfitById(null==s?void 0:s.get("outfitId")))),(0,h.w)(s=>{var u,_,d;return s.length||this.navCtrl.navigateBack("/home/tabs/feed"),this.outfit={...s[0]},this.selectedItems=null===(u=this.outfit)||void 0===u?void 0:u.items,this.form.patchValue({outfitSetting:null===(_=this.outfit)||void 0===_?void 0:_.setting,outfitName:null===(d=this.outfit)||void 0===d?void 0:d.name}),this.wardrobeService.wardrobe}),(0,O.b)(s=>{this.clothingItems=s,i.dismiss()})).subscribe()})}onAddClothingItem(){}onConfirmEditOutfit(){var i,e,n,s,u;const _=new v.P(this.selectedItems,this.form.value.outfitName,this.form.value.outfitSetting,null!==(i=this.outfit)&&void 0!==i&&i.id?null===(e=this.outfit)||void 0===e?void 0:e.id:Math.random().toString(),null!==(n=this.outfit)&&void 0!==n&&n.createdAt?null===(s=this.outfit)||void 0===s?void 0:s.createdAt:new Date,!(null===(u=this.outfit)||void 0===u||!u.isFavorite));this.loadingCtrl.create({message:"Editing Outfit..."}).then(d=>{d.present(),this.outfitsService.editOutfit(_).subscribe(k=>{k?this.toastCtrl.create({message:"Outfit edited Successfully!",duration:1500,position:"bottom",icon:"checkmark-circle-outline",color:"success"}).then(g=>{g.present(),d.dismiss(),this.navCtrl.navigateBack("/wardrobe")}):this.toastCtrl.create({message:"Could not edit Outfit!",duration:1500,position:"bottom",icon:"close-circle-outline",color:"danger"}).then(g=>{g.present()})})})}cancelChanges(){this.modal.dismiss()}confirmChanges(){this.modal.dismiss()}trackItems(i,e){return e.id}isChecked(i){return this.selectedItems.find(e=>e.id===i)}checkboxChange(i){const{checked:e,value:n}=i.detail;this.selectedItems=e?[...this.selectedItems,n]:this.selectedItems.filter(s=>s.id!==n.id)}}return l.\u0275fac=function(i){return new(i||l)(t.Y36(E.U),t.Y36(o.HT),t.Y36(C.e),t.Y36(o.yF),t.Y36(o.SH),t.Y36(T.gz))},l.\u0275cmp=t.Xpm({type:l,selectors:[["app-edit-outfit"]],viewQuery:function(i,e){if(1&i&&t.Gf(I,7),2&i){let n;t.iGM(n=t.CRH())&&(e.modal=n.first)}},standalone:!0,features:[t.jDz],decls:32,vars:6,consts:[[3,"translucent"],["slot","start"],["defaultHref","/wardrobe"],["slot","primary"],[3,"disabled","click"],["color","primary","name","checkmark","slot","icon-only"],[3,"fullscreen"],[3,"formGroup"],["size-sm","6","offset-sm","3"],["type","text","name","outfitName","label","Outfit Name","formControlName","outfitName","labelPlacement","floating"],["name","outfitSetting","formControlName","outfitSetting","label","Outfit Occasion","label-placement","floating"],[3,"value",4,"ngFor","ngForOf"],["size-sm","6",1,"ion-text-right"],["id","selected-clothing-items","size","small",3,"click"],["slot","start","name","add-outline"],["trigger","selected-clothing-items"],["modal",""],[3,"value"],[3,"click"],["slot","end"],["color","light"],["id","modal-list",3,"inset"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"src"],["aria-label","Label",3,"value","checked","ionChange"],[4,"ngIf"]],template:function(i,e){1&i&&(t.TgZ(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-buttons",1),t._UZ(3,"ion-back-button",2),t.qZA(),t.TgZ(4,"ion-title"),t._uU(5," Edit Outfit! "),t.qZA(),t.TgZ(6,"ion-buttons",3)(7,"ion-button",4),t.NdJ("click",function(){return e.onConfirmEditOutfit()}),t._UZ(8,"ion-icon",5),t.qZA()()()(),t.TgZ(9,"ion-content",6)(10,"form",7)(11,"ion-grid")(12,"ion-row")(13,"ion-col",8)(14,"ion-item"),t._UZ(15,"ion-input",9),t.qZA()()(),t.TgZ(16,"ion-row")(17,"ion-col",8)(18,"ion-item")(19,"ion-select",10),t.YNc(20,Z,2,2,"ion-select-option",11),t.qZA()()()(),t.TgZ(21,"ion-row")(22,"ion-col",12)(23,"ion-chip"),t._uU(24),t.qZA()(),t.TgZ(25,"ion-col",12)(26,"ion-button",13),t.NdJ("click",function(){return e.onAddClothingItem()}),t._UZ(27,"ion-icon",14),t._uU(28," Add Clothing Item! "),t.qZA()()()()(),t.TgZ(29,"ion-modal",15,16),t.YNc(31,x,13,3,"ng-template"),t.qZA()()),2&i&&(t.Q6J("translucent",!0),t.xp6(7),t.Q6J("disabled",!e.form.valid&&!e.selectedItems.length),t.xp6(2),t.Q6J("fullscreen",!0),t.xp6(1),t.Q6J("formGroup",e.form),t.xp6(10),t.Q6J("ngForOf",e.clothingSettings),t.xp6(4),t.hij(" ",e.selectedItems.length," Items Selected "))},dependencies:[o.Pc,o.oU,o.YG,o.Sm,o.nz,o.hM,o.wI,o.W2,o.jY,o.Gu,o.gu,o.pK,o.Ie,o.Q$,o.q_,o.Nd,o.t9,o.n0,o.Bs,o.wd,o.sr,o.ki,o.w,o.QI,o.j9,o.cs,f.ez,f.sg,f.O5,c.u5,c._Y,c.JJ,c.JL,c.UX,c.sg,c.u]}),l})()}}]);